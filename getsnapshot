#!/bin/sh

listurl='ftp://ftp.openbsd.org/pub/OpenBSD/ftplist'
arch=`uname -m`

# download and parse ftp list
ftp -V $listurl
servers=`cat ftplist | sed 's/[[:space:]].*//'`
if [ -e ftplist ]; then
   rm -fr ftplist
fi

# presentation
echo 'Servers available: '

PS3='Choose a server: '
select server in $servers; do
    if [ $server ]; then
        ftp -V \
            ${server}/snapshots/$arch/INSTALL* \
            ${server}/snapshots/$arch/bsd* \
            ${server}/snapshots/$arch/*.tgz \
            ${server}/snapshots/ports.tar.gz
        break
    else
        echo 'invalid selection'
    fi
done

cd ..
